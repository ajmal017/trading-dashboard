{"ast":null,"code":"var Config = {\n  PROTOCOL: \"ws:\",\n  HOST: \"//localhost\",\n  PORT: \":7888\"\n};\n\nvar Socket = function () {\n  var instance;\n\n  function createInstance() {\n    var address = Config.PROTOCOL + Config.HOST + Config.PORT;\n    var socket = new WebSocket(address);\n    console.log(\"Created a Socket instance at: \" + address);\n    return socket;\n  }\n\n  return {\n    getInstance: function getInstance() {\n      if (!instance) {\n        instance = createInstance();\n      }\n\n      return instance;\n    }\n  };\n}();\n\nexport function subscribeForPushNotifications(subscriptionSubject, callback) {\n  var socket = Socket.createInstance();\n\n  socket.onopen = function () {\n    var msg = JSON.stringify({\n      type: \"SUBSCRIBE\",\n      subject: subscriptionSubject\n    });\n    socket.send(msg);\n  };\n\n  socket.onmessage = function (msg) {\n    console.log(\"SOCKET: \" + msg.data);\n    callback();\n  };\n}\nexport default Socket;","map":{"version":3,"sources":["/home/dmitry/React/dashboard/src/socket/Socket.js"],"names":["Config","PROTOCOL","HOST","PORT","Socket","instance","createInstance","address","socket","WebSocket","console","log","getInstance","subscribeForPushNotifications","subscriptionSubject","callback","onopen","msg","JSON","stringify","type","subject","send","onmessage","data"],"mappings":"AAAA,IAAMA,MAAM,GAAG;AACbC,EAAAA,QAAQ,EAAE,KADG;AAEbC,EAAAA,IAAI,EAAE,aAFO;AAGbC,EAAAA,IAAI,EAAE;AAHO,CAAf;;AAMA,IAAMC,MAAM,GAAI,YAAW;AAEzB,MAAIC,QAAJ;;AAEA,WAASC,cAAT,GAA0B;AACxB,QAAMC,OAAO,GAAGP,MAAM,CAACC,QAAP,GAAkBD,MAAM,CAACE,IAAzB,GAAgCF,MAAM,CAACG,IAAvD;AACA,QAAMK,MAAM,GAAG,IAAIC,SAAJ,CAAcF,OAAd,CAAf;AACAG,IAAAA,OAAO,CAACC,GAAR,CAAY,mCAAmCJ,OAA/C;AACA,WAAOC,MAAP;AACD;;AAED,SAAO;AACLI,IAAAA,WAAW,EAAE,uBAAW;AACtB,UAAG,CAACP,QAAJ,EAAc;AACZA,QAAAA,QAAQ,GAAGC,cAAc,EAAzB;AACD;;AACD,aAAOD,QAAP;AACD;AANI,GAAP;AAUD,CArBc,EAAf;;AAuBA,OAAO,SAASQ,6BAAT,CAAuCC,mBAAvC,EAA4DC,QAA5D,EAAsE;AAE3E,MAAMP,MAAM,GAAGJ,MAAM,CAACE,cAAP,EAAf;;AAEAE,EAAAA,MAAM,CAACQ,MAAP,GAAgB,YAAM;AACpB,QAAMC,GAAG,GAAGC,IAAI,CAACC,SAAL,CAAe;AAACC,MAAAA,IAAI,EAAC,WAAN;AAAmBC,MAAAA,OAAO,EAACP;AAA3B,KAAf,CAAZ;AACAN,IAAAA,MAAM,CAACc,IAAP,CAAYL,GAAZ;AACD,GAHD;;AAKAT,EAAAA,MAAM,CAACe,SAAP,GAAmB,UAACN,GAAD,EAAS;AAC1BP,IAAAA,OAAO,CAACC,GAAR,CAAY,aAAaM,GAAG,CAACO,IAA7B;AACAT,IAAAA,QAAQ;AACT,GAHD;AAID;AAED,eAAeX,MAAf","sourcesContent":["const Config = {\n  PROTOCOL: \"ws:\",\n  HOST: \"//localhost\",\n  PORT: \":7888\"\n}\n\nconst Socket = (function() {\n\n  let instance;\n\n  function createInstance() {\n    const address = Config.PROTOCOL + Config.HOST + Config.PORT\n    const socket = new WebSocket(address)\n    console.log(\"Created a Socket instance at: \" + address)\n    return socket;\n  }\n\n  return {\n    getInstance: function() {\n      if(!instance) {\n        instance = createInstance()\n      }\n      return instance\n    }\n  }\n\n\n})();\n\nexport function subscribeForPushNotifications(subscriptionSubject, callback) {\n\n  const socket = Socket.createInstance()\n\n  socket.onopen = () => {\n    const msg = JSON.stringify({type:\"SUBSCRIBE\", subject:subscriptionSubject})\n    socket.send(msg)\n  }\n\n  socket.onmessage = (msg) => {\n    console.log(\"SOCKET: \" + msg.data)\n    callback()\n  }\n}\n\nexport default Socket;\n"]},"metadata":{},"sourceType":"module"}
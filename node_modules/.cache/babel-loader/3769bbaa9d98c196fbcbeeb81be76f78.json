{"ast":null,"code":"import _classCallCheck from \"/home/dmitry/React/dashboard/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/dmitry/React/dashboard/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/dmitry/React/dashboard/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/dmitry/React/dashboard/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/dmitry/React/dashboard/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/dmitry/React/dashboard/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/dmitry/React/dashboard/src/App.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport './App.css';\nimport Order from './components/Order';\nimport Trade from './components/Trade';\nimport TextInput from './components/TextInput';\nimport InstrumentSelector from './components/InstrumentSelector';\nimport SideSelector from './components/SideSelector';\nimport ServerManager from './components/ServerManager';\nimport PriceChart from './components/PriceChart';\nimport Socket from './socket/Socket';\nvar serverHostName = new ServerManager().getServerHostname();\ndocument.title = \"Trading Dashboard\";\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  // WebSocket to get push notifications from the backend\n  function App() {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this));\n    _this.orderDisplayLimit = 10;\n    _this.tradeDisplayLimit = 10;\n    _this.state = {\n      orders: [],\n      trades: [],\n      tradePrices: [],\n      ord_props: {}\n    };\n    _this.handleClick = _this.handleClick.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.socket = new Socket();\n\n    _this.startSubscriptions();\n\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"startSubscriptions\",\n    value: function startSubscriptions() {\n      var _this2 = this;\n\n      this.socket.subscribeForPushNotifications(\"ORDERS\", function () {\n        _this2.getOrders();\n      });\n      this.socket.subscribeForPushNotifications(\"TRADE\", function () {\n        _this2.getTrades();\n\n        _this2.getTradesByInstrument(_this2.state.ord_props.instcode);\n      });\n    }\n  }, {\n    key: \"onNewOrderUpdate\",\n    value: function onNewOrderUpdate(key, value) {\n      var ord_p = this.state.ord_props;\n      ord_p[key] = value;\n      this.setState({\n        ord_props: ord_p\n      });\n\n      if (key === 'instcode') {\n        this.getTradesByInstrument(this.state.ord_props.instcode);\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.refreshData();\n    }\n  }, {\n    key: \"refreshData\",\n    value: function refreshData() {\n      this.getOrders();\n      this.getTrades();\n    }\n  }, {\n    key: \"getOrders\",\n    value: function getOrders() {\n      var _this3 = this;\n\n      console.log(\"GET ORDERS\");\n      axios.get(serverHostName + \"/order?limit=\" + this.orderDisplayLimit).then(function (res) {\n        var order_list = res.data;\n\n        if (typeof order_list != 'string') {\n          _this3.setState({\n            orders: order_list\n          });\n        }\n      });\n    }\n  }, {\n    key: \"getTrades\",\n    value: function getTrades() {\n      var _this4 = this;\n\n      console.log(\"GET TRADES\");\n      axios.get(serverHostName + \"/trade?limit=\" + this.tradeDisplayLimit).then(function (res) {\n        var trade_list = res.data;\n\n        if (typeof trade_list != 'string') {\n          _this4.setState({\n            trades: trade_list\n          });\n        }\n      });\n    }\n  }, {\n    key: \"getTradesByInstrument\",\n    value: function getTradesByInstrument(instrCode) {\n      var _this5 = this;\n\n      console.log(\"GET TRADES BY INSTRUMENT: \" + instrCode);\n      axios.get(serverHostName + \"/trade/byInstr?instCode=\" + instrCode).then(function (res) {\n        var trade_list = res.data;\n\n        if (trade_list !== \"\") {\n          trade_list.reverse();\n        }\n\n        _this5.setState({\n          tradePrices: trade_list\n        });\n      });\n    }\n  }, {\n    key: \"handleClick\",\n    value: function handleClick() {\n      axios.post(serverHostName + '/order/add', {\n        \"InstrCode\": this.state.ord_props.instcode,\n        \"Quantity\": this.state.ord_props.quantity,\n        \"Price\": this.state.ord_props.price,\n        \"Notes\": this.state.ord_props.notes,\n        \"Side\": this.state.ord_props.side\n      }).then(function (response) {}, function (error) {\n        console.log(error);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this6 = this;\n\n      var selectedTrades = [];\n\n      if (this.state.tradePrices.length > 0) {\n        selectedTrades = this.state.tradePrices.map(function (trade) {\n          return {\n            \"timestamp\": trade.Timestamp,\n            \"price\": trade.Price\n          };\n        });\n      }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"MainBlock\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"FloatLeft\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"OrderEntry\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        className: \"Title\",\n        id: \"title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, \"Order entry\"), React.createElement(InstrumentSelector, {\n        onInputUpdate: function onInputUpdate(key, value) {\n          return _this6.onNewOrderUpdate(key, value);\n        },\n        tag: \"instcode\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }), React.createElement(SideSelector, {\n        onInputUpdate: function onInputUpdate(key, value) {\n          return _this6.onNewOrderUpdate(key, value);\n        },\n        tag: \"side\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }), React.createElement(TextInput, {\n        onInputUpdate: function onInputUpdate(key, value) {\n          return _this6.onNewOrderUpdate(key, value);\n        },\n        input_name: \"Quantity\",\n        tag: \"quantity\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }), React.createElement(TextInput, {\n        onInputUpdate: function onInputUpdate(key, value) {\n          return _this6.onNewOrderUpdate(key, value);\n        },\n        input_name: \"Price\",\n        tag: \"price\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }), React.createElement(TextInput, {\n        onInputUpdate: function onInputUpdate(key, value) {\n          return _this6.onNewOrderUpdate(key, value);\n        },\n        input_name: \"Notes\",\n        tag: \"notes\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        className: \"Button\",\n        id: \"btn_send_order\",\n        onClick: this.handleClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, \"Send order\"))), React.createElement(\"div\", {\n        className: \"FloatLeft\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        className: \"Title\",\n        id: \"title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, \"Trade prices\"), React.createElement(PriceChart, {\n        instrumentCode: this.state.ord_props.instcode,\n        data: selectedTrades,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }))), React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"MainBlock\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"FloatLeft\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        className: \"Title\",\n        id: \"title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, \"Orders\"), React.createElement(\"table\", {\n        className: \"DataTable\",\n        id: \"orders\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, \"Order ID\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, \"Timestamp\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, \"Inst\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, \"Side\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, \"Qty\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, \"Price\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, \"Filled Quantity\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, \"Fill Price\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, \"Status\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, \"Notes\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, \"Action\"))), this.state.orders.map(function (order) {\n        return React.createElement(Order, {\n          key: order.OrderID,\n          orderid: order.OrderID,\n          timestamp: order.Timestamp,\n          instrument: order.InstrCode,\n          side: order.Side,\n          quantity: order.Quantity,\n          price: order.Price,\n          quantity_filled: order.QuantityFilled,\n          fill_price: order.FillPrice,\n          status: order.Status,\n          notes: order.Notes,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 169\n          },\n          __self: this\n        });\n      }))), React.createElement(\"div\", {\n        className: \"FloatLeft\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        className: \"Title\",\n        id: \"title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, \"Trades\"), React.createElement(\"table\", {\n        className: \"DataTable\",\n        id: \"trades\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, \"Trade ID\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, \"Timestamp\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, \"Resting order ID\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }, \"Incoming order ID\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, \"Qty\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }, \"Price\"))), this.state.trades.map(function (trade) {\n        return React.createElement(Trade, {\n          key: trade.TradeID,\n          tradeid: trade.TradeID,\n          timestamp: trade.Timestamp,\n          restingorderid: trade.RestingOrderID,\n          incomingorderid: trade.IncomingOrderID,\n          quantity: trade.Quantity,\n          price: trade.Price,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 187\n          },\n          __self: this\n        });\n      }))), React.createElement(\"div\", {\n        className: \"Clear\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/home/dmitry/React/dashboard/src/App.js"],"names":["React","Component","axios","Order","Trade","TextInput","InstrumentSelector","SideSelector","ServerManager","PriceChart","Socket","serverHostName","getServerHostname","document","title","App","orderDisplayLimit","tradeDisplayLimit","state","orders","trades","tradePrices","ord_props","handleClick","bind","socket","startSubscriptions","subscribeForPushNotifications","getOrders","getTrades","getTradesByInstrument","instcode","key","value","ord_p","setState","refreshData","console","log","get","then","res","order_list","data","trade_list","instrCode","reverse","post","quantity","price","notes","side","response","error","selectedTrades","length","map","trade","Timestamp","Price","onNewOrderUpdate","order","OrderID","InstrCode","Side","Quantity","QuantityFilled","FillPrice","Status","Notes","TradeID","RestingOrderID","IncomingOrderID"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport './App.css';\nimport Order from './components/Order'\nimport Trade from './components/Trade'\nimport TextInput from './components/TextInput'\nimport InstrumentSelector from './components/InstrumentSelector'\nimport SideSelector from './components/SideSelector'\nimport ServerManager from './components/ServerManager'\nimport PriceChart from './components/PriceChart'\nimport Socket from './socket/Socket'\n\nconst serverHostName = new ServerManager ().getServerHostname();\n\ndocument.title = \"Trading Dashboard\";\n\nclass App extends Component {\n\n  // WebSocket to get push notifications from the backend\n  socket\n  orderDisplayLimit = 10\n  tradeDisplayLimit = 10\n\n  constructor() {\n    super()\n\n    this.handleClick = this.handleClick.bind(this)\n    this.socket = new Socket()\n    this.startSubscriptions()\n  }\n\n  startSubscriptions() {\n\n    this.socket.subscribeForPushNotifications(\"ORDERS\", () => {\n      this.getOrders()\n    })\n\n    this.socket.subscribeForPushNotifications(\"TRADE\", () => {\n      this.getTrades()\n      this.getTradesByInstrument(this.state.ord_props.instcode);\n    })\n  }\n\n  state = {\n    orders: [],\n    trades: [],\n    tradePrices: [],\n    ord_props: {}\n  }\n\n  onNewOrderUpdate(key, value) {\n    var ord_p = this.state.ord_props\n    ord_p[key] = value\n    this.setState({ ord_props: ord_p })\n    if (key === 'instcode') {\n      this.getTradesByInstrument(this.state.ord_props.instcode)\n    }\n  }\n\n  componentDidMount() {\n    this.refreshData();\n  }\n\n  refreshData() {\n    this.getOrders()\n    this.getTrades()\n  }\n\n  getOrders() {\n\tconsole.log(\"GET ORDERS\");\n    axios.get(serverHostName + `/order?limit=` + this.orderDisplayLimit)\n      .then(res => {\n        const order_list = res.data;\n        if (typeof(order_list) != 'string') {\n          this.setState({ orders: order_list });\n        }\n      });\n  }\n\n  getTrades() {\n\tconsole.log(\"GET TRADES\");\n    axios.get(serverHostName + `/trade?limit=` + this.tradeDisplayLimit)\n      .then(res => {\n        const trade_list = res.data;\n        if (typeof(trade_list) != 'string') {\n          this.setState({ trades: trade_list });\n        }\n      });\n  }\n\n  getTradesByInstrument(instrCode) {\n\tconsole.log(\"GET TRADES BY INSTRUMENT: \" + instrCode);\n    axios.get(serverHostName + `/trade/byInstr?instCode=` + instrCode)\n      .then(res => {\n        const trade_list = res.data;\n        if (trade_list !== \"\") {\n          trade_list.reverse()\n        }\n        this.setState({ tradePrices: trade_list });\n      });\n  }\n\n  handleClick() {\n    axios.post(serverHostName + '/order/add', {\n      \"InstrCode\": this.state.ord_props.instcode,\n      \"Quantity\": this.state.ord_props.quantity,\n      \"Price\": this.state.ord_props.price,\n      \"Notes\": this.state.ord_props.notes,\n      \"Side\": this.state.ord_props.side,\n\t})\n\t.then(\n\t\t(response) => {},\n\t\t(error) => { console.log(error) }\n\t);\n  }\n\n  render() {\n\n    var selectedTrades = []\n    if (this.state.tradePrices.length > 0) {\n      selectedTrades = this.state.tradePrices.map(trade => { return {\"timestamp\": trade.Timestamp, \"price\": trade.Price}});\n    }\n\n    return (\n      <div>\n        <div className=\"MainBlock\">\n        <div className=\"FloatLeft\">\n        <div className=\"OrderEntry\">\n          <h1 className=\"Title\" id=\"title\">Order entry</h1>\n          <InstrumentSelector\n             onInputUpdate={(key, value) => this.onNewOrderUpdate(key, value)} tag=\"instcode\"/>\n          <SideSelector\n             onInputUpdate={(key, value) => this.onNewOrderUpdate(key, value)} tag=\"side\"/>\n          <TextInput\n             onInputUpdate={(key, value) => this.onNewOrderUpdate(key, value)} input_name=\"Quantity\" tag=\"quantity\"/>\n          <TextInput\n             onInputUpdate={(key, value) => this.onNewOrderUpdate(key, value)} input_name=\"Price\" tag=\"price\"/>\n          <TextInput\n             onInputUpdate={(key, value) => this.onNewOrderUpdate(key, value)} input_name=\"Notes\" tag=\"notes\"/>\n          <button className=\"Button\" id=\"btn_send_order\" onClick={this.handleClick}>Send order</button>\n        </div>\n\t    </div>\n        <div className=\"FloatLeft\">\n          <h1 className= \"Title\" id=\"title\">Trade prices</h1>\n          <PriceChart instrumentCode={this.state.ord_props.instcode} data={selectedTrades}/>\n        </div>\n        </div>\n        <ul>\n        <div className=\"MainBlock\">\n            <div className=\"FloatLeft\">\n            <h1 className= \"Title\" id=\"title\">Orders</h1>\n            <table className=\"DataTable\" id=\"orders\">\n              <tbody>\n                <tr>\n                  <th>Order ID</th>\n                  <th>Timestamp</th>\n                  <th>Inst</th>\n                  <th>Side</th>\n                  <th>Qty</th>\n                  <th>Price</th>\n                  <th>Filled Quantity</th>\n                  <th>Fill Price</th>\n                  <th>Status</th>\n                  <th>Notes</th>\n                  <th>Action</th>\n                </tr>\n              </tbody>\n              {this.state.orders.map(order =>\n                <Order key={order.OrderID} orderid={order.OrderID} timestamp={order.Timestamp} instrument={order.InstrCode} side={order.Side} quantity={order.Quantity} price={order.Price} quantity_filled={order.QuantityFilled} fill_price={order.FillPrice} status={order.Status} notes={order.Notes} />\n              )}\n            </table>\n            </div>\n            <div className=\"FloatLeft\">\n            <h1 className=\"Title\" id=\"title\">Trades</h1>\n            <table className=\"DataTable\" id=\"trades\">\n              <tbody>\n                <tr>\n                  <th>Trade ID</th>\n                  <th>Timestamp</th>\n                  <th>Resting order ID</th>\n                  <th>Incoming order ID</th>\n                  <th>Qty</th>\n                  <th>Price</th>\n                </tr>\n              </tbody>\n              {this.state.trades.map(trade =>\n                <Trade key={trade.TradeID} tradeid={trade.TradeID} timestamp={trade.Timestamp} restingorderid={trade.RestingOrderID} incomingorderid={trade.IncomingOrderID} quantity={trade.Quantity} price={trade.Price} />\n              )}\n            </table>\n            </div>\n            <div className=\"Clear\" />\n        </div>\n        </ul>\n      </div>\n    );\n  }\n\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}